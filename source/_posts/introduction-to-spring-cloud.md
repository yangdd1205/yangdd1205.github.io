---
title: Spring Cloud 简介
tags:
  - Spring Cloud
categories: Spring Cloud
date: 2017-12-17 23:09:10
---


简单聊聊微服务和 Spirng Cloud。

<!-- more -->

## 微服务

微服务简单的来说就是把系统中的每个模块拆分出来独立运行。例如，商城系统中包含了商品模块、用户模块、订单模块、支付模块等等，原先的做法是写在同一个项目里面，随着系统越来越完善，功能越来越多，代码耦合就越深。微服务的思想就是拆分，将庞大的系统拆分为小系统或小模块（统一称为服务），每个服务只需要保证对外提供服务，至于服务内部用什么语言、技术，外界根本不关心（不管黑猫白猫 捉到老鼠就是好猫）。比如将商品系统按功能模块拆分开，原本是个整体的商城系统，现在被拆分成了商品服务、用户服务、订单服务等等，当需要哪个服务时就调用相应的服务，这样代码耦合度就降低了。

### 垂直系统 VS 微服务

垂直系统的弊端：
* 随着业务量的增加，复杂性逐渐提高、代码耦合太深，不利于开发和维护
* 技术债务逐渐积累加剧，很多代码都是为了解决问题而开发
* 阻碍新技术的引入和使用，只能依赖原有旧的框架开发
* 无法进行高可用、负载均衡、水平扩展和合理的伸缩
* 部署的服务速度会随着代码积累逐渐变慢、性能降低，随着数据量增大下降

### 微服务的架构

一个微服务需要有清晰的业务边界，高度的模块化服务化解耦。每个服务都完成自己的功能，并且每个服务都可以灵活的使用自己本身所需的技术。它们是分而治之，独立部署运行，又可以相互进行数据通信，可以使用 Rest 方法，也可以使用 RPC 方法，更加可以使用消息中间件。

### 微服务的优缺点
优点：
* 扩展性强，便于开发和维护，局部修改简单
* 启动较快、性能、压力测试更有针对性。调节 CPU、内存、磁盘、IO 性能等参数值指标方便
* 技术栈不受限制，可以使用任何技术框架，也可以选择其他编程语言实现
* 可伸缩性、扩展性、高可用性都可控，可调节

缺点：
* 运维要求比较高，需要分布式监控、自动化部署测试等
* 分布式的复杂性、逻辑复杂、分布式事务等问题
* 接口调用、服务与服务之间联调测试比较复杂

## Spring Cloud 简述

Spring Cloud 是一个开发分布式系统的工具包，它为开发人员提供了快速构建分布式系统中一些基础设施的工具（如服务注册、配置中心、消息总线、负载均衡、数据监控等）。它将目前各家公司开发的比较成熟，经得起实际考验的服务框架组合，通过“Spring Boot 风格”进行再封装，屏蔽了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。

Spring Cloud：
* 遵循于约定优于配置的原则
* 开箱即用、配置简单、编写代码简单、部署简单
* 适用于各种环境，即可单独部署，又可集中部署，轻量级的组件
* 支持丰富的组件集成，并且有 90% 的主流框架配置参数提供
* 实现了一套完整的微服务流程，各个方面考虑全面



### Sring Cloud 组成

Spring Cloud 的子项目，大致可以分为两类。一类是对现有成熟框架 “Spring Boot 化”的封装和抽象，也是数量最多的项目，第二类是开发了一部分分布式系统的基础设施的实现，如 Spring Cloud Stream 扮演的就是 Kafka、MQ 这样的角色。对于我们想要快速实践微服务的开发者来说，第一类子项目已经足够使用，如：
* Spring Cloud Netflix 是对 Netflix 开发的一套分布式服务框架的封装，包括服务的发现和注册、负载均衡、断路器、Rest 客户端、请求路由等
* Spring Cloud Config 将配置信息中心化保存，配置 Spring Cloud Bus 可以实现动态修改配置文件
* Spring Cloud Stream 分布式消息队列，是对 Kafka、MQ 的封装
* Spring Cloud Security 是对 Spring Security 的封装，并能配合 Netflix 使用
* Spring Cloud Zookeeper 对 Zookeeper 的封装，使之能配置其他 Spring Cloud 子项目使用


## 参考资料

Spring Cloud：https://projects.spring.io/spring-cloud