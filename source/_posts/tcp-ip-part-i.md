---
title: 网络基础知识
tags:
  - 计算机网络
  - TCP/IP
date: 2018-03-30 20:27:00
---


最近在看[《图解TCP/IP》](https://www.amazon.cn/dp/B00DMS9990/)，这篇先介绍下网络基础知识。

最开始的计算机都是单机模式，随着计算机的不断发展，人们已经不再局限于单机模式，而是将一个个计算机连接在一起，形成一个计算机网络。

<!-- more -->


计算机网络，根据其规模可分为：
* WAN（Wide Area Network，广域网）指覆盖多个远距离区域的远程网络
* MAN（Metropolitan Area Network，城域网）比广域网小一级、连接整个城市的网络
* LAN（Local Area Network，局域网）指一个楼层、一栋楼或一个校园等相对较小的区域内的网络


## 协议

### 计算机之间通信的前提

简单来说，协议就是计算机与计算机之间通过网络实现通信时事先达成的一种“约定”。这种“约定”使那些由不同厂商的设备、不同的 CPU 以及不同的操作系统组成的计算机之间，只要遵循相同的协议就能够实现通信。如果没有协议或者使用了不同的协议，就好比两个说着不同语言的人，谁也听不懂谁在说什么。

### 协议的制定

有了协议还不行，还得大家都使用同样的协议才能通信。所以 ISO（International Organization for Standards，国际标准化组织）制定了一个国际标准 OSI（Open Systems Interconnection，开放式通信系统互联参考模型），对通信系统进行了标准化，但并没有得到普及。现在全世界广泛应用的通信协议是由 IETF（Internet Engineering Task Force）所建议的 TCP/IP 协议。
 
## OSI 参考模型

OSI 参考模型将通信协议中必要的功能分成了 7 层。每个分层都接收由它下一层所提供的特定服务，并负责为自己的上一层提供特定服务。上下层之间进行交互时所遵循的约定叫做“接口”。同一层之间的交互所遵循的约定叫做“协议”。分层可以将每个分层独立使用，即使系统中某些分层发生变化，也不会波及整个系统。通过分层能够细分通信功能，更易于独立实现每个分层的协议，并界定各个分层的具体责任和义务。


<table>
    <tr>
        <th  style="width: 100px;"></th>
        <th >分层名称</th>
        <th>功能</th>
        <th>每层功能概览</th>
    </tr>
    <tr>
        <td>7</td>
        <td>应用层</td>
        <td>针对特定的应用的协议。</td>
        <td>为应用程序提供服务并规定应用程序中通信相关的细节。比如：电子邮件、远程登录、文件传输。</td>
    </tr>
    <tr>
        <td>6</td>
        <td>表示层</td>
        <td>设备固有数据格式和网络标准数据格式的转换。</td>
        <td>接收不同表现形式的信息，如文字流、图像、声音等。</td>
    </tr>
    <tr>
        <td>5</td>
        <td>会话层</td>
        <td>通信管理。负者建立和新开通信连接（数据流动的逻辑通路）。管理传输层以下的分层。</td>
        <td>如何建立连接，何时断开连接以及保存多久的连接？</td>
    </tr>
    <tr>
        <td>4</td>
        <td>传输层</td>
        <td>管理两个节点之间的数据传输。负者可靠传输（确保数据被可靠地传送到目标地址）。</td>
        <td>是否有数据丢失？</td>
    </tr>
    <tr>
        <td>3</td>
        <td>网络层</td>
        <td>地址管理与路由选择。</td>
        <td>经过哪个路由器传递到目标地址？</td>
    </tr>
    <tr>
        <td>2</td>
        <td>数据链路层</td>
        <td>互连设备之间传送和识别数据帧。</td>
        <td>数据帧与比特流之间的转换</td>
    </tr>
    <tr>
        <td>1</td>
        <td>物理层</td>
        <td>以“0”、“1”代表电压的高低、灯光的闪灭。界定连接器和网线的规格。</td>
        <td>比特流与电子信号之间的切换。连接器与网线之间的规格。</td>
    </tr>
</table>



## 传输方式的分类

### 面向有连接型与面向无连接型

面向有连接型：在发送数据前，先打开一个连接。连接被关闭时无法发送数据。比如：打电话

面向无连接型：不要求建立和断开连接。发送端可于任何时候自由发送数据。比如：寄快递（不需要知道收件人地址是否真实存在）

### 电路交换与分组交换

电路交换：两台计算机建立好连接后，一直占用着这条通信电路，在断开连接之前，其他机器都不可用这条电路收发数据。

分组交换：让连接到通信电路的计算机将所有要发送的数据分成多个数据包，按照一定的顺序排列之后分别发送。数据被细分后，所有的计算机就可以一起收发数据。

### 根据接收端数量分类

单播（Unicast）：指 1 对 1 通信

广播（Broadcast）：指将消息从 1 台主机发送给与之相连的所有其他主机

多播（Multicast）：也是将消息发给多个接收主机。不同之处在于多播要限定某一组主机作为接收端

任播（Anycast）：指在特定的多台主机中选出一台作为接收端的一种通信方式。通常，所被选中的那台特定主机将返回一个单播信号。任播在实际网络中的应用有 DNS 根域名解析服务器

## 地址

### MAC 地址

MAC 地址由设备的制造厂商针对每块网卡进行分别指定。人们可以通过制造识别号、制造商内部产品编号以及产品通用编号确保 MAC 地址的**唯一性**。

### IP 地址

为了高效地找出通信的目标地址，地址还需要具有**层次性**。

IP 地址有网络号和主机号两部分组成。即使通信主体的 IP 地址不同，若主机号不同，网络号相同，说明它们处于同一个网段。

网络传输中，每个节点会根据分组数据的地址信息，来判断该报文应该由哪个网卡发送出去。为此，各个地址会参考一个发出接口列表。在这一点上 MAC 寻址和 IP 寻址是一样的。只不过 MAC 寻址中所参考的这张表叫做**地址转发表**，而 IP 寻址中所参考的叫做**路由控制表**。



## 网络的构成要素

| 设备 | 作用 |
|:---:|:---:|
| 网卡 | 使计算机连接网络的设备（Network Interface）
| 中继器（Repeater）|从物理层上延长网络的设备
| 网桥（Bridge）/ 2 层交换机| 从数据链路层上延长网络的设备
| 路由器（Router）/ 3 层交换机| 通过网络层转发分组数据的设备
| 4 ~ 7 层交换机| 处理传输层以上各层网络传输的设备
| 网关（Gateway）| 转换协议的设备



